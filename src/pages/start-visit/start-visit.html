<!--
  Generated template for the StartVisitPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
    <ion-navbar  color="dark">
  
       <ion-buttons start>
            <button ion-button icon-only (click)="closeModal()">
              <ion-icon name="close"></ion-icon>
            </button>
          </ion-buttons>
      <ion-title>
         Visit
      </ion-title>
      
    </ion-navbar>
  </ion-header>


<ion-content padding>
<h2>{{ schedule.PatName }}</h2>
<h3>{{ schedule.EmpName }}</h3>
<ion-item>
    <ion-label floating>Date</ion-label>
    <ion-datetime displayFormat="MM/DD/YYYY" [(ngModel)]="schedule.StartDt"></ion-datetime>
  </ion-item>
<ion-item>
    <ion-label floating>Start</ion-label>
    <ion-datetime displayFormat="h:mm A" pickerFormat="h mm A" [(ngModel)]="schedule.StartTm"></ion-datetime>
  </ion-item>
  <ion-item>
      <ion-label floating>End</ion-label>
      <ion-datetime displayFormat="h:mm A" pickerFormat="h mm A" [(ngModel)]="schedule.EndTm"></ion-datetime>
    </ion-item>
    <ion-item>
        <ion-label floating>Visit Type</ion-label>
        <ion-select [(ngModel)]="schedule.AssessType" interface="popover" >
          <ion-option *ngFor="let atyp of assessTypes" value="{{atyp.AssessType}}" (ionSelect)="getVstType()" >{{atyp.Description}}</ion-option>
        </ion-select>
      </ion-item>

      <ion-item>
          <ion-label floating>Payer</ion-label>
          <ion-select [(ngModel)]="schedule.ProPay" interface="popover" >
            <ion-option *ngFor="let pay of payers" value="{{pay.ProPay}}" (ionSelect)="getCodes()" >{{pay.Description}}</ion-option>
          </ion-select>
        </ion-item>
    <ion-item>
        <ion-label floating>Job Code</ion-label>
        <ion-select [(ngModel)]="schedule.JobCode" interface="popover" >
          <ion-option *ngFor="let job of jobCodes" value="{{job.Code}}" >{{job.Description}}</ion-option>
        </ion-select>
      </ion-item>
      <ion-item>
          <ion-label floating>Visit Code</ion-label>
          <ion-select [(ngModel)]="schedule.VstType" interface="popover" >
            <ion-option *ngFor="let vst of vstCodes" value="{{vst.Code}}" >{{vst.Description}}</ion-option>
          </ion-select>
        </ion-item>
    <ion-item>
        <ion-label floating>Comments</ion-label>
        <ion-textarea [(ngModel)]="schedule.Comments" ></ion-textarea>
        
      </ion-item>
      
      
    
     
      <button *ngIf="requiredScreens.indexOf('VitalSign|')>-1 && completedScreens.indexOf('VitalSign|')==-1" ion-button round large block outline color="primary" (click)="startVitals()">Vital Signs</button>
      <button *ngIf="requiredScreens.indexOf('VitalSign|')>-1 && completedScreens.indexOf('VitalSign|')>-1" ion-button round large block color="primary" (click)="startVitals()">Vital Signs</button>
<button *ngIf="optionalScreens.indexOf('VitalSign|')>-1 && completedScreens.indexOf('VitalSign|')==-1" ion-button round large block outline color="secondary" (click)="startVitals()">Vital Signs</button>
<button *ngIf="optionalScreens.indexOf('VitalSign|')>-1 && completedScreens.indexOf('VitalSign|')>-1" ion-button round large block color="secondary" (click)="startVitals()">Vital Signs</button>

<button *ngIf="requiredScreens.indexOf('Functional|')>-1 && completedScreens.indexOf('Functional|')==-1" ion-button round large block outline color="primary" (click)="startFunctional()">Functional</button>
<button *ngIf="requiredScreens.indexOf('Functional|')>-1 && completedScreens.indexOf('Functional|')>-1" ion-button round large block color="primary" (click)="startFunctional()">Functional</button>
<button *ngIf="optionalScreens.indexOf('Functional|')>-1 && completedScreens.indexOf('Functional|')==-1" ion-button round large block outline color="secondary" (click)="startFunctional()">Functional</button>
<button *ngIf="optionalScreens.indexOf('Functional|')>-1 && completedScreens.indexOf('Functional|')>-1" ion-button round large block color="secondary" (click)="startFunctional()">Functional</button>

<button *ngIf="requiredScreens.indexOf('Safety|')>-1 && completedScreens.indexOf('Safety|')==-1" ion-button round large block outline color="primary" (click)="startSafety()">Safety</button>
<button *ngIf="requiredScreens.indexOf('Safety|')>-1 && completedScreens.indexOf('Safety|')>-1" ion-button round large block color="primary" (click)="startSafety()">Safety</button>
<button *ngIf="optionalScreens.indexOf('Safety|')>-1 && completedScreens.indexOf('Safety|')==-1" ion-button round large block outline color="secondary" (click)="startSafety()">Safety</button>
<button *ngIf="optionalScreens.indexOf('Safety|')>-1 && completedScreens.indexOf('Safety|')>-1" ion-button round large block color="secondary" (click)="startSafety()">Safety</button>

<button *ngIf="requiredScreens.indexOf('Signature|')>-1 && schedule.SignatureData==''" ion-button round large block outline color="primary" (click)="startPatSignature()">Signature</button>
<button *ngIf="requiredScreens.indexOf('Signature|')>-1 && schedule.SignatureData!=''" ion-button round large block color="primary" (click)="startPatSignature()">Signature</button>
<button *ngIf="optionalScreens.indexOf('Signature|')>-1 && schedule.SignatureData==''" ion-button round large block outline color="secondary" (click)="startPatSignature()">Signature</button>
<button *ngIf="optionalScreens.indexOf('Signature|')>-1 && schedule.SignatureData!=''" ion-button round large block outline color="secondary" (click)="startPatSignature()">Signature</button>
<ion-img *ngIf="schedule.SignatureData!=''" src="{{schedule.SignatureData}}"></ion-img>

</ion-content>

<ion-footer  >
    <button ion-button large full color="primary" (click)="saveVisit()">
         Save Visit
      </button>
    
  </ion-footer>